Структура репозитория:

папка ddl содержит скрипт create_tables.sql для создания таблиц;

папка dml содержит:
    скрипт create_smart.sql заполняет таблицу;
    скрипт create_smart.sql для создания материализованных представлений с необходимыми данными по заданию, а именно: нужно создать поля в таблице: 

        category (категория товара): Это поле будет содержать информацию о категории товара, по которой вы будете группировать данные;

        order_date (дата заказа): Это поле будет содержать дату каждого заказа;

        revenue (выручка): Это поле будет содержать сумму выручки для каждой продажи;

        cum_sum_revenue (кумулятивная выручка): Это поле будет содержать результаты расчета кумулятивной выручки с использованием оконных функций;

        cum_count_orders (кумулятивное количество заказов): Это поле будет содержать кумулятивное количество заказов для каждой категории товаров;

        avg_cheque (средний чек): Это поле будет содержать результаты расчета среднего чека с использованием оконных функций;

        max_avg_cheque (значение максимального среднего чека): Это поле будет содержать значение максимального среднего чека для каждой категории товаров;

        date_max_avg_cheque (дата максимального среднего чека): Это поле будет содержать дату, на которой был достигнут максимальный средний чек;


    Описание: сть таблица sales с данными о продажах товаров. задача — рассчитать кумулятивную выручку и средний чек для каждой категории товаров с использованием оконных функций ClickHouse. Это задание включает в себя следующие шаги:

    Расчет кумулятивной выручки: Для каждой категории товаров (category) вычислите кумулятивную выручку на каждый день. Это означает, что для каждой даты вам нужно будет посчитать сумму выручки для данной категории товаров на эту дату и для всех предыдущих дат.

    Расчет среднего чека: Для каждой категории товаров на каждый день вычислите средний чек, который равен кумулятивной выручке на этот день, поделенной на кумулятивное количество заказов на этот день.

    Определение даты максимального среднего чека: Найдите дату, на которой был достигнут максимальный средний чек для каждой категории товаров, а также значение этого максимального среднего чека.





Алгоритм работы

скачайте репозиторий на локальный ПК;

в терминале перейдите в директорию, где сохранили данный проект;

в командной строке запустите команду docker-compose up -d;

подключите базу данных к клиенту управления базами данных и изучите:

    Материализованные представления: sales_analyze